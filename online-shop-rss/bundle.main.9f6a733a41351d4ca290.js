(()=>{"use strict";var e,t,n;!function(e){e.tile="tile",e.simple="simple"}(e||(e={})),function(e){e.asc="ASC",e.desc="DESC"}(t||(t={})),function(e){e.number="number",e.string="string"}(n||(n={}));const r={goodsItems:[],filteredGoodsItems:[],cart:{},sumCartItems:0,countCartItems:0,filters_settings:{all_brand:[],all_category:[],minMaxPrice:[],minMaxStock:[],_brand:[],_category:[],price:[],stock:[]},sort_settings:{field_name:"title",direction:t.asc},promoCodes:[],view_settings:{mode:e.simple},ls_key_cart:"dudarik_online_shop_cart",ls_key_settings:"dudarik_online_shop_settings",settings:{isLSAvailabel:!1}},i=["title","price","rating"],o=(e,r,i,o)=>{e.sort(((e,r,i)=>r===n.number&&i===t.asc?(e=>(t,n)=>parseFloat(t[e].toString())>parseFloat(n[e].toString())?1:-1)(e):r===n.number&&i===t.desc?(e=>(t,n)=>parseFloat(t[e].toString())<parseFloat(n[e].toString())?1:-1)(e):i===t.desc?(e=>(t,n)=>t[e]<n[e]?1:-1)(e):(e=>(t,n)=>t[e]>n[e]?1:-1)(e))(r,i,o))},a=()=>{r.sort_settings=(()=>{const e=new URL(location.href).searchParams.get("sortBy");let n="title",r=t.asc;if(null===e)return{field_name:n,direction:r};const[o,a]=e.split(",");return i.includes(o)&&(n=o),a===t.desc&&(r=t.desc),{field_name:n,direction:r}})()},s=["_brand","_category","price","stock"];class c{static filterByFieldMinMax(e,t,n,r){return e.filter((e=>e[t]>=n&&r>=e[t]))}static filterByFieldValue(e,t,n){return n.reduce(((n,r)=>(n=[...n,...e.filter((e=>String(e[t]).toLowerCase()===r.toLowerCase()))],n)),[])}static filterFindByStr(e,t){return Array.from(new Set(this.SEARCH_FIELDS.reduce(((n,r)=>(n=[...n,...e.filter((e=>String(e[r]).toLowerCase().includes(t.toLowerCase())))],n)),[])))}}c.SEARCH_FIELDS=["title","description","price","rating","stock","brand","category"];const l=()=>{const e=new URL(location.href);return s.reduce(((t,n)=>{const i=e.searchParams.get(n);if(null!==i){let e=i.split(",");e="_"===n[0]?e.filter((e=>r.filters_settings[`all${n}`].includes(e))):parseInt(e[0])<=parseInt(e[1])?e:[],e.length>0&&(t=[...t,{name:n,value:e}])}return t}),[])},d=(e,t,n)=>e.filter((e=>String(e[t]).toLocaleLowerCase()===n.toLocaleLowerCase())).length,m=(e,t)=>{const n=[0,0];if(e.length>0){n[0]=parseInt(String(e[0][t])),n[1]=parseInt(String(e[0][t]));for(let r=0;r<e.length;r++){const i=parseInt(String(e[r][t]));i<n[0]&&(n[0]=i),i>n[1]&&(n[1]=i)}}return n.map((e=>String(e)))},g=()=>{const e=l();for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];r.filters_settings[n.name]=n.value}switch(r.filteredGoodsItems=function(e,t,n){let r=[...e];if(t.length>0)for(let e=0;e<t.length;e++)r="_"===t[e].name[0]?c.filterByFieldValue(r,t[e].name.slice(1),t[e].value):c.filterByFieldMinMax(r,t[e].name,parseFloat(t[e].value[0]),parseFloat(t[e].value[1]));return n&&(r=c.filterFindByStr(r,n)),r}(r.goodsItems,e,new URL(location.href).searchParams.get("search")),r.sort_settings.field_name){case"title":default:(e=>{o(r.filteredGoodsItems,"title",n.string,e)})(r.sort_settings.direction);break;case"price":t=r.sort_settings.direction,o(r.filteredGoodsItems,"price",n.number,t);break;case"rating":(e=>{o(r.filteredGoodsItems,"rating",n.number,e)})(r.sort_settings.direction)}var t},u=(e,t)=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:t}).format(e);function p(e){if(!(e instanceof EventTarget))throw new Error(`${e} : element null or undefined`);return e instanceof HTMLTemplateElement||e instanceof HTMLElement||Element,e}function f(e){if(!(e instanceof EventTarget))throw new Error(`${e} : element null or undefined`);return HTMLElement,e}const h=[{id:1,title:"GIGABYTE GeForce RTX 3090 TI GAMING",description:"Видеокарты GIGABYTE GeForce RTX 3090 TI GAMING обеспечивают рекордную производительность для геймеров, работая на базе Ampere — архитектуры NVIDIA RTX второго поколения. Они оснащены улучшенными ядрами RT и тензорными ядрами, потоковыми мультипроцессорами и высокоскоростной памятью G6X для потрясающих игровых возможностей.",price:108999,rating:4,stock:17,brand:"GIGABYTE",category:"RTX 3090",images:["../images/goodsImg/RTX3090/gigabyte3090.webp","../images/goodsImg/RTX3090/gigabyte3090-2.webp"]},{id:2,title:"MSI GeForce RTX 3090 TI SUPRIM X",description:"GeForce RTX 3090 Ti — невероятно мощные видеокарты с производительностью класса TITAN. В их основе лежит Ampere — архитектура NVIDIA RTX второго поколения — с удвоенной производительностью трассировки лучей и технологий искусственного интеллекта благодаря улучшенным ядрам RT, тензорным ядрам и потоковым мультипроцессорам. Видеокарты также оснащены впечатляющим объемом видеопамяти 24 ГБ G6X, призванным обеспечить исключительный уровень игры и творчества.",price:112999,rating:5,stock:12,brand:"MSI",category:"RTX 3090",images:["../images/goodsImg/RTX3090/MSI3090.webp","../images/goodsImg/RTX3090/MSI3090-2.webp"]},{id:3,title:"Palit GeForce RTX 3090 TI GameRock",description:"Серия Palit GameRock с дизайном «Ослепительный ангел», специально разработана для требовательных игроков-энтузиастов, которые хотят получить максимальный игровой опыт и оригинальную систему освещения ARGB. Серия GameRock предоставляет лучшие игровые функции, высочайшую эффективность охлаждения и превосходное качество видеокарты, что позволяет вам чувствовать себя настоящим рокером на игровой сцене. Как говорится, Palit - твой дом спалит.",price:106999,rating:4,stock:24,brand:"Palit",category:"RTX 3090",images:["../images/goodsImg/RTX3090/palit3090.webp","../images/goodsImg/RTX3090/palit3090-2.webp"]},{id:4,title:"Palit GeForce RTX 3080 Ti GamingPro",description:"Видеокарта Palit GeForce RTX 3080 Ti GamingPro [NED308T019KB-132AA] работает абсолютно бесшумно даже при нагрузках среднего уровня за счет технологии «0 децибел». При этом главное достоинство устройства состоит в том, что оно обеспечивает графику и частоту смены кадров на самом высоком уровне. Это позволяет использовать его для ускорения искусственного интеллекта, задействованного в играх и творческих приложениях. Для этого видеокарта Palit GeForce RTX 3080 Ti GamingPro [NED308T019KB-132AA] была оснащена графическим процессором GeForce RTX 3080 Ti с микроархитектурой NVIDIA Ampere, а также сразу 12 ГБ видеопамяти типа GDDR6X.",price:94999,rating:5,stock:7,brand:"Palit",category:"RTX 3080",images:["../images/goodsImg/RTX3080/palit3080.webp","../images/goodsImg/RTX3080/palit3080-2.webp"]},{id:5,title:"GIGABYTE GeForce RTX 3080 Ti EAGLE OC",description:"Видеокарта GIGABYTE GeForce RTX 3080 Ti EAGLE OC [GV-N308TEAGLE OC-12GD] работает в команде с многозадачным потоковым процессором NVIDIA GeForce. За счет этого она обеспечивает компьютеру рекордную производительность, удивляя даже бывалых геймеров. Устройство транслирует картинку с разрешением вплоть до Ultra HD 8K (7680x4320 точек на дюйм). Для увеличения срока службы видеокарта GIGABYTE GeForce RTX 3080 Ti EAGLE OC [GV-N308TEAGLE OC-12GD] была оснащена мощным охлаждением WINDFORCE 3X, которое представлено радиатором с 7 композитными трубками и 3 осевыми вентиляторами.",price:98999,rating:3,stock:26,brand:"GIGABYTE",category:"RTX 3080",images:["../images/goodsImg/RTX3080/Gigabyte3080.webp","../images/goodsImg/RTX3080/Gigabyte3080-2.webp"]},{id:6,title:"MSI GeForce RTX 3080 Ti VENTUS 3X OC",description:"Видеокарта MSI GeForce RTX 3080 Ti VENTUS 3X OC [RTX 3080 Ti VENTUS 3X 12G OC] способна удивить своей функциональностью даже завзятого геймера. Она может похвастать графическим процессором GeForce RTX 3080 Ti с микроархитектурой NVIDIA Ampere, 12 ГБ видеопамяти типа GDDR6X и возможностью транслировать изображение с разрешением до Ultra HD 8K (7680x4320). Это все, что нужно для самой увлекательной и насыщенной событиями игры!",price:89999,rating:5,stock:3,brand:"MSI",category:"RTX 3080",images:["../images/goodsImg/RTX3080/Msi3080.webp","../images/goodsImg/RTX3080/Msi3080-2.webp"]},{id:7,title:"ASUS TUF Gaming GeForce RTX 3070 Ti OC Edition",description:"Видеокарта ASUS TUF Gaming GeForce RTX 3070 Ti OC Edition относится к моделям лимитированной серии и предлагает требовательным поклонникам компьютерных игр высокий уровень мощности графики. В основе адаптера содержится процессор GeForce RTX семейства 3070 Ti, который отличается номинальной частотой в пределах 1575 МГц и частотой в режиме разгона до значения 1815 МГц. Возможности подключения представлены 3 разъемами DisplayPort и 2 HDMI.",price:77499,rating:4,stock:15,brand:"ASUS",category:"RTX 3070",images:["../images/goodsImg/RTX3070/Asus3070.webp","../images/goodsImg/RTX3070/Asus3070-2.webp"]},{id:8,title:"GIGABYTE GeForce RTX 3070 Ti VISION OC",description:"Видеокарта GIGABYTE GeForce RTX 3070 Ti VISION OC [GV-N307TVISION OC-8GD] располагает 8 ГБ памяти и оснащена шиной разрядностью 256 бит, поэтому быстро обрабатывает «сложную» графику и достойно себя покажет даже в самых требовательных играх, трансляции видеопотоков и других задачах. Модель поддерживает разрешение Ultra HD 8K, а технология трассировки лучшей способствует максимальной реалистичности и детализации изображения.",price:63999,rating:3,stock:21,brand:"GIGABYTE",category:"RTX 3070",images:["../images/goodsImg/RTX3070/Gigabyte3070.webp","../images/goodsImg/RTX3070/Gigabyte3070-2.webp"]},{id:9,title:"MSI GeForce RTX 3070 Ti SUPRIM X",description:"Видеокарта MSI GeForce RTX 3070 Ti SUPRIM X [RTX 3070 Ti SUPRIM X 8G] с архитектурой NVIDIA Ampere создана для революционного гейминга. Она обеспечивает непревзойденную производительность за счет RT и тензорных ядер, а также потоковых мультипроцессоров. При этом даже при самых активных нагрузках вам не стоит бояться перегрева, ведь видеокарта MSI GeForce RTX 3070 Ti SUPRIM X [RTX 3070 Ti SUPRIM X 8G] оснащена системой Tri Frozr 2S, которая отслеживает температуру. Также она дополнена синхронизируемой подсветкой MSI Mystic Light. Поставляется устройство вместе с кронштейном-держателем.",price:77999,rating:5,stock:9,brand:"MSI",category:"RTX 3070",images:["../images/goodsImg/RTX3070/MSI3070.webp","../images/goodsImg/RTX3070/MSI3070-2.webp"]},{id:10,title:"Palit GeForce RTX 3060 DUAL OC",description:"Видеокарта Palit GeForce RTX 3060 DUAL OC (LHR) [NE63060T19K9-190AD] представляет собой высокопроизводительное решение для профессиональных рабочих станций и игровых систем. Благодаря технологиям Ampere, мощному видеопроцессору и 12 ГБ памяти данная модель позволяет с легкостью решать любые задачи. Кроме того, графический ускоритель поддерживает трассировку лучей, за счет чего обеспечивается реалистичное изображение в играх. Для отвода тепла предусмотрено 2 осевых вентилятора с особой формой лопастей, благодаря чему рабочая температура не превышает 93°C.",price:33999,rating:4,stock:15,brand:"Palit",category:"RTX 3060",images:["../images/goodsImg/RTX3060/Palit3060.webp","../images/goodsImg/RTX3060/Palit3060-2.webp"]},{id:11,title:"MSI GeForce RTX 3060 GAMING X",description:"Видеокарта MSI GeForce RTX 3060 GAMING X (LHR) [RTX 3060 GAMING X 12G] обладает высокой производительностью, благодаря чему может станет отличным выбором для настольных игровых и рабочих систем. Основой данной модели является многоядерный блок с поддержкой трассировки лучей, который дополнен 12 ГБ скоростной видеопамяти. Благодаря такому сочетанию графический ускоритель способен обеспечить высокую производительность для комфортного решения любых творческих и рабочих задач. Другой особенностью модели является эффективная и сравнительно тихая система охлаждения, благодаря которой обеспечивается минимально возможная температура компонентов под нагрузкой.",price:36299,rating:5,stock:11,brand:"MSI",category:"RTX 3060",images:["../images/goodsImg/RTX3060/MSI3060.webp","../images/goodsImg/RTX3060/MSI3060-2.webp"]},{id:12,title:"ASUS GeForce RTX 3060 STRIX GAMING OC",description:"Видеокарта ASUS GeForce RTX 3060 STRIX GAMING OC (LHR) разработана для самых требовательных геймеров. Она сочетает в себе исключительно высокий уровень мощности, эффективное отведение тепла, стабильность и эффектный внешний вид. Процессор GeForce RTX семейства 3060 отличается номинальной частотой в пределах 1320 МГц, В оснащение данной модели входят также 12 ГБ видеопамяти.",price:51999,rating:5,stock:6,brand:"ASUS",category:"RTX 3060",images:["../images/goodsImg/RTX3060/Asus3060.webp","../images/goodsImg/RTX3060/Asus3060-2.webp"]},{id:13,title:"MSI GeForce RTX 3050 AERO ITX OC",description:"Видеокарта GeForce RTX 3050 создана на базе высокопроизводительной архитектуры NVIDIA Ampere. Отличная производительность для игр и работы с графикой благодаря улучшенным ядрам RT и тензорным ядрам, потоковым мультипроцессорам и высокоскоростной памяти G6. Вооружитесь мощностью видеокарт GeForce RTX.",price:23999,rating:3,stock:14,brand:"MSI",category:"RTX 3050",images:["../images/goodsImg/RTX3050/MSI3050.webp","../images/goodsImg/RTX3050/MSI3050-2.webp"]},{id:14,title:"ASUS ROG Strix GeForce RTX 3050 OC Edition",description:"Видеокарта GeForce RTX 3050 создана на базе высокопроизводительной архитектуры NVIDIA Ampere. Отличная производительность для игр и работы с графикой благодаря улучшенным ядрам RT и тензорным ядрам, потоковым мультипроцессорам и высокоскоростной памяти G6. Вооружитесь мощностью видеокарт GeForce RTX.",price:53999,rating:5,stock:20,brand:"ASUS",category:"RTX 3050",images:["../images/goodsImg/RTX3050/ASUS3050.webp","../images/goodsImg/RTX3050/ASUS3050-2.webp"]},{id:15,title:"GIGABYTE AORUS GeForce RTX 3050 ELITE",description:"GIGABYTE AORUS GeForce RTX 3050 ELITE обеспечивают оптимальную производительность в топовых играх благодаря возможностям Ampere — архитектуры NVIDIA RTX второго поколения. Оптимальная производительность и качество графики благодаря улучшенным ядрам RT и тензорным ядрам, потоковым мультипроцессорам и высокоскоростной памяти G6.",price:32999,rating:4,stock:18,brand:"GIGABYTE",category:"RTX 3050",images:["../images/goodsImg/RTX3050/Gigabyte3050.webp","../images/goodsImg/RTX3050/Gigabyte3050-2.webp"]},{id:16,title:"Palit GeForce RTX 4090 GameRock OmniBlack",description:"Версия GeForce RTX 40 GameRock OmniBlack создана для любителей чистого черного цвета. Не отвлекаясь на подсветку, геймеры и создатели контента могут погрузиться в абсолютно темную среду всей душой. Простой, но изысканный дизайн с черными кристаллами демонстрирует высококлассный игровой стиль пользователя. Присмотревшись, вы заметите, что мерцающие звезды достали с неба и встроили в поверхность кожуха системы охлаждения, что делает GameRock OmniBlack настоящим произведением искусства и мощной игровой видеокартой даже без RGB-подсветки.",price:137999,rating:5,stock:2,brand:"Palit",category:"RTX 4090",images:["../images/goodsImg/RTX4090/Palit4090.webp","../images/goodsImg/RTX4090/Palit4090-2.webp"]},{id:17,title:"GIGABYTE GeForce RTX 4090 GAMING OC",description:"Графические процессоры NVIDIA GeForce RTX 40 обеспечивают невероятную скорость для игр и творчества. Они созданы на основе сверхэффективной архитектуры NVIDIA Ada Lovelace, которая обеспечивает качественный скачок как в производительности, так и в графических возможностях на базе ИИ. Погрузитесь в виртуальные миры с трассировкой лучей и сверхвысоким FPS с минимальной задержкой. Используйте возможности для творчества с беспрецедентным ускорением рабочего процесса.",price:145999,rating:5,stock:4,brand:"GIGABYTE",category:"RTX 4090",images:["../images/goodsImg/RTX4090/Gigabyte4090.webp","../images/goodsImg/RTX4090/Gigabyte4090-2.webp"]},{id:18,title:"MSI GeForce RTX 4090 GAMING X TRIO",description:"Играйте стильно! Серия GAMING получила обновленную систему охлаждения TRI FROZR 3 и способна поддерживать высокую производительность под любыми нагрузками. Все это предлагается в виде стильных устройств, способных удовлетворить жажду скорости любого геймера.",price:151999,rating:5,stock:8,brand:"MSI",category:"RTX 4090",images:["../images/goodsImg/RTX4090/MSI4090.webp","../images/goodsImg/RTX4090/MSI4090-2.webp"]},{id:19,title:"GIGABYTE GeForce RTX 2060 Super WINDFORCE OC",description:"Видеокарта GIGABYTE GeForce RTX 2060 Super WINDFORCE OC [GV-N206SWF2OC-8GD] – игровой видеоадаптер высокого класса, который способен удовлетворить потребности большинства любителей видеоигр. Модель оснащена широко известным графическим процессором GeForce RTX 2060 Super, произведенным с использованием техпроцесса 12 нм. Полную реализацию потенциальных возможностей видеопроцессора помогает обеспечить скоростная память GDDR6, объем которой составляет 8 ГБ.",price:35499,rating:4,stock:12,brand:"GIGABYTE",category:"RTX 2060",images:["../images/goodsImg/RTX2060/Gigabyte2060.webp","../images/goodsImg/RTX2060/Gigabyte2060-2.webp"]},{id:20,title:"ASUS Dual GeForce RTX 2060 EVO",description:"Видеокарта ASUS Dual GeForce RTX 2060 EVO с поддержкой технологии трассировки лучей обеспечит высокую производительность вашего компьютера в самых разных задачах — будь то игры на высоких настройках графики, монтаж видео или ретушь фото в профессиональных приложениях. В основе данной модели используется чип, выполненный с применением микроархитектуры Turing благодаря которому видеокарта имеет в 6 раз более высокую производительность по сравнению с моделями предыдущего поколения.",price:30999,rating:5,stock:7,brand:"ASUS",category:"RTX 2060",images:["../images/goodsImg/RTX2060/ASUS2060.webp","../images/goodsImg/RTX2060/ASUS2060-2.webp"]}],S=()=>h,T=e=>{const t=Object.entries(e),n=S();return t.reduce(((e,t)=>{const r=n.find((e=>e.id===parseFloat(t[0])));return r&&(e+=r.price*parseFloat(t[1])),e}),0)},I=()=>{var e;r.sumCartItems=T(r.cart),r.countCartItems=(e=r.cart,Object.values(e).reduce(((e,t)=>e+parseInt(t)),0))};const _=e=>Object.prototype.hasOwnProperty.call(r.cart,e),y=e=>{_(e)||(r.cart[e]="1")},w=()=>{const e=document.querySelector("#cart_sum_info"),t=document.querySelector("#cart_count_info");if(!(e instanceof HTMLDivElement))throw new Error("Cant find cart info sum div");if(!(t instanceof HTMLDivElement))throw new Error("Cant find cart info count div");e.innerText=u(r.sumCartItems,0),t.innerText=r.countCartItems.toString()};function b(){document.querySelector("#popUp_background").classList.add("move_pop_up")}function v(e){const t=document.querySelector("#popUp_background");e.target===t&&t.classList.remove("move_pop_up")}class E{}E.isLSAvailabel=()=>{try{const e="Dudarik_test_iwouercmv857aer";return localStorage.setItem(e,JSON.stringify(e)),localStorage.removeItem(e),!0}catch(e){return console.log(e),!1}},E.saveToLS=(e,t)=>!!r.settings.isLSAvailabel&&(localStorage.setItem(e,JSON.stringify(t)),!0),E.loadFromLS=e=>{if(!r.settings.isLSAvailabel)return!1;const t=localStorage.getItem(e);let n="";return t&&(n=JSON.parse(t)),n},E.saveCartDataToLS=e=>!!r.settings.isLSAvailabel&&(localStorage.setItem(r.ls_key_cart,JSON.stringify(e)),!0),E.loadCartDataFromLS=()=>{if(!r.settings.isLSAvailabel)return!1;const e=localStorage.getItem(r.ls_key_cart);let t={};return e&&(t=JSON.parse(e)),t};const R=new Array(7).fill(!1);function L(e){if(!(e.target instanceof HTMLInputElement))throw new Error("error");const t=Number(e.target.dataset.index);e.target.validity.valid&&e.target.value.length>0?R[t]=!0:R[t]=!1,console.log(R)}function G(e){if(!(e.target instanceof HTMLInputElement))throw new Error("error");const t=e.target.value.replace(/\D/gi,"").substring(0,16).match(/.{1,4}/g);e.target.value=null!==t?t.join(" "):""}function M(e){if(!(e.target instanceof HTMLInputElement))throw new Error("error");const t=e.target.value.replace(/\D/gi,"").substring(0,4).match(/.{1,2}/g);null!==t?(+t[0]>12&&(t[0]="12"),e.target.value=t.join("/")):e.target.value=""}function X(e){if(!(e.target instanceof HTMLInputElement))throw new Error("error");e.target.value=e.target.value.replace(/\D/gi,"").substring(0,3)}async function A(e=!1){const t=new URL(location.href),n=await fetch(t.origin+"/cartPage.html").then((e=>e.text())).then((e=>(new DOMParser).parseFromString(e,"text/html").querySelector("#page"))),i=p(document.querySelector("#app"));i.innerHTML="",i.append(p(n)),function(e){const t=document.querySelector("#empty_cart_container"),n=document.querySelector("#cart_container");0!==e?(t.style.display="none",n.style.display="flex"):(n.style.display="none",t.style.display="flex")}(r.sumCartItems);let o=0;const a=[];for(const e in r.cart){a.push(e);const t=document.querySelector("#allCartStock");o+=Number(r.cart[e]),t.textContent=`Всего товара: ${o} шт`}document.getElementById("num_elems_pagination").addEventListener("input",ee),function(e,t,n){const i=document.querySelector("#cart-goods"),o=document.getElementById("num_elems_pagination"),a=document.getElementById("current-page");let s;null===t?(t=h.length,s=""):s=t,n||(n=0),localStorage.setItem("pageNumber",JSON.stringify(n)),o.value=s.toString(),i.innerHTML="";const c=Number(t)*n,l=c+Number(t);a.textContent=`${n+1}`;const d=e.slice(c,l),m=Math.ceil(e.length/t);localStorage.setItem("maxNumberPage",JSON.stringify(m)),d.forEach((e=>{!function(e){const t=document.querySelector("#cart-goods"),n=h.find((t=>t.id===Number(e)));if(void 0!==n){const i=document.createElement("div");i.className="cart__container";const o=document.createElement("div");o.className="cart__img_container";const a=document.createElement("img");a.className="cart__img",a.src=`${n.images[0]}`,o.append(a);const s=document.createElement("a");s.href=`/goods/${n.id}`,s.classList.add("cart__title"),s.innerText=n.title;const c=document.createElement("div");c.className="cart__price",c.textContent=`Цена: ${n.price} ₽`;const l=document.createElement("div");l.className="cart__stock",l.textContent=`Остаток товара: ${n.stock} шт.`;const d=document.createElement("div");d.className="cart-button__container";const m=document.createElement("button");m.classList.add("minusOneitemBtn"),m.dataset.goodsId=e,m.dataset.maxCount=n.stock.toString(),m.addEventListener("click",K);const g=document.createElement("div");g.classList.add("counterNum"),g.textContent=`${r.cart[e]}`;const u=document.createElement("button");u.classList.add("plusOneitemBtn"),u.dataset.typeButton="+",u.dataset.goodsId=e,u.dataset.maxCount=n.stock.toString(),u.addEventListener("click",K),d.append(m),d.append(g),d.append(u),i.append(c),i.append(o),i.append(s),i.append(l),i.append(d),t.append(i)}}(e)}))}(a,JSON.parse(localStorage.getItem("numOfElem")),JSON.parse(localStorage.getItem("pageNumber"))),document.getElementById("plus-one-page").addEventListener("click",te),document.getElementById("minus-one-page").addEventListener("click",ne),document.querySelector("#totalPrice").textContent=u(r.sumCartItems,0),document.querySelector("#promo-text").addEventListener("input",Q);const s=document.querySelector("#promo-button");null!==localStorage.getItem("PromoARR")&&function(){const e=document.getElementById("inputBlock");if(null===localStorage.getItem("PromoARR")){const e=[];E.saveToLS("PromoARR",JSON.stringify(e))}const t=JSON.parse(localStorage.getItem("PromoARR")),n=document.createElement("div");for(let e=0;e<t.length;e++){const r=document.createElement("span");r.textContent=`добавлена скидка "${t[e].promoCode}" - ${t[e].disc}%`,r.classList.add("message_for_user");const i=document.createElement("button");i.dataset.promoCode=t[e].promoCode,i.classList.add("deletePromoBtn"),i.addEventListener("click",W),n.append(r),n.append(i)}e.after(n)}(),s.addEventListener("click",Z),function(){const e=JSON.parse(localStorage.getItem("PromoARR")),t=document.querySelector("#totalPrice");if(null!==e&&0!==e.length){t.classList.add("after-promo");const o=document.getElementById("newPrice"),a=e.reduce(((e,t)=>e+t.disc),0);o.textContent=(n=T(r.cart),i=a/100,`${Math.floor(n-n*i)} ₽`)}else t.classList.remove("after-promo");var n,i}(),document.querySelector("#go_buy_page").addEventListener("click",b);const c=document.querySelector("#popUp_background");e&&c.classList.add("move_pop_up"),c.addEventListener("click",v);const l=document.querySelectorAll(".buy-input");l.forEach((e=>{e.addEventListener("change",L)})),document.querySelector("#debit_card-number").addEventListener("input",G),document.querySelector("#debit_card-date").addEventListener("input",M),document.querySelector("#debit_card-ccv").addEventListener("input",X),document.querySelector("#order_button").addEventListener("click",(()=>{!function(e){if(e.forEach((e=>{!1===R[Number(e.dataset.index)]?e.parentElement.classList.add("input_error"):e.parentElement.classList.remove("input_error")})),!R.includes(!1)){const e=document.querySelector("#popUp_background");e.innerHTML="",e.style.fontSize="30px",e.textContent="Спасибо за покупку!",setTimeout((()=>{location.href="/"}),3e3)}}(l)}))}const C=async()=>{const e=document.querySelector("#find_goods");if(e){const t=r.filteredGoodsItems.length>0?`Найдено товаров: ${r.filteredGoodsItems.length}`:"Товаров не найдено...";e.innerHTML=t}};class k{constructor(e,t,n,r){this.filter_name=r,this.range=e,this.min=Number(e.dataset.min),this.max=Number(e.dataset.max);const i=this.range.querySelector(".handle.left"),o=this.range.querySelector(".handle.right");if(!(i instanceof HTMLElement&&o instanceof HTMLElement))throw new Error("No divs for slider");this.handles=[i,o],this.startPos=0,this.activeHandle,this.minCost=document.getElementById(t),this.maxCost=document.getElementById(n),this.handles.forEach((e=>{e.addEventListener("mousedown",this.startMove.bind(this))})),window.addEventListener("mouseup",this.stopMove.bind(this)),window.addEventListener("touchend",this.stopMove.bind(this)),window.addEventListener("touchcancel",this.stopMove.bind(this)),window.addEventListener("touchleave",this.stopMove.bind(this));const a=parseInt(String(i.dataset.value)),s=parseInt(String(o.dataset.value));this.prevMin=a,this.prevMax=s,this.setThumbsPosition(a,s)}setThumbsPosition(e,t){if(0===e&&0===t)return;const n=this.range.querySelector(".handle.left"),r=this.range.querySelector(".handle.right"),i=this.range.getBoundingClientRect(),o=this.handles[0].getBoundingClientRect();if(!(n instanceof HTMLElement&&r instanceof HTMLElement))throw new Error("No divs for slider");this.prevMin=e,this.prevMax=t;const a=(e-this.min)/this.max*(i.width-o.width/2)+"px";let s=i.width-o.width/2+"px";this.max-t!=0&&(s=t/this.max*(i.width-o.width/2)+"px"),this.range.style.setProperty("--x-1",a),this.range.style.setProperty("--x-2",s),this.minCost.textContent=`${e}`,this.maxCost.textContent=`${t}`}startMoveTouch(e){const t=e.target.getBoundingClientRect();this.startPos=e.touches[0].clientX-t.x,this.activeHandle=e.target,this.moveTouchListener=this.moveTouch.bind(this),window.addEventListener("touchmove",this.moveTouchListener)}startMove(e){this.startPos=e.offsetX,this.activeHandle=e.target,this.moveListener=this.move.bind(this),window.addEventListener("mousemove",this.moveListener)}moveTouch(e){this.move({clientX:e.touches[0].clientX})}move(e){const t=this.activeHandle.classList.contains("left"),n=t?"--x-1":"--x-2",r=this.range.getBoundingClientRect(),i=this.activeHandle.getBoundingClientRect();let o=e.clientX-r.x-this.startPos;if(t){const e=parseInt(this.range.style.getPropertyValue("--x-2"));o=Math.min(o,e-i.width),o=Math.max(o,0-i.width/2)}else{const e=parseInt(this.range.style.getPropertyValue("--x-1"));o=Math.max(o,e+i.width),o=Math.min(o,r.width-i.width/2)}this.activeHandle.dataset.value=`${this.calcHandleValue((o+i.width/2)/r.width)}`,this.range.style.setProperty(n,o+"px"),this.handles[0].addEventListener("click",(()=>{this.handles[0].style.zIndex="1",this.handles[1].style.zIndex="0"})),this.handles[1].addEventListener("click",(()=>{this.handles[0].style.zIndex="0",this.handles[1].style.zIndex="1"})),this.minCost.textContent=`${this.handles[0].dataset.value}`,this.maxCost.textContent=`${this.handles[1].dataset.value}`}calcHandleValue(e){return Math.round(e*(this.max-this.min)+this.min)}stopMove(){if(window.removeEventListener("mousemove",this.moveListener),window.removeEventListener("touchmove",this.moveTouchListener),this.prevMin===parseInt(String(this.handles[0].dataset.value))&&this.prevMax===parseInt(String(this.handles[1].dataset.value)))return;const e=new URL(location.href),t=this.handles[0].dataset.value,n=this.handles[1].dataset.value;if(!t||!n)throw new Error("No data min max");r.filters_settings[this.filter_name]=[t,n],e.searchParams.set(this.filter_name,r.filters_settings[this.filter_name].join(",")),this.prevMin=parseInt(t),this.prevMax=parseInt(n),history.pushState(null,"",decodeURIComponent(e.toString())),ie("#goods"),H(),C()}}const N=async(e,t)=>await fetch(e).then((e=>e.text())).then((e=>p((new DOMParser).parseFromString(e,"text/html").querySelector(`#${t}`)))),x=async(e,t)=>{const n=await N("rangeFilterTpl.html","range_filter"),r=n.querySelector("#filter_title"),{filter_title:i,filter_name:o,filter_settings:a}=t;if(p(r).innerText=i,p(r).setAttribute("id",Date.now().toString()),!(n instanceof HTMLElement))throw new Error("No range filter in getRangeFilterHtml.ts");n.setAttribute("id",`range_filter_${o}`);const s=n.querySelector("#range_slider");if(!(s instanceof HTMLDivElement))throw new Error("No slider in range slider template");s.setAttribute("id",`range_slider_${o}`),s.dataset.min=a[0],s.dataset.max=a[1];const c=n.querySelector("#min_"),l=n.querySelector("#max_"),d=n.querySelector(".handle.left"),m=n.querySelector(".handle.right"),g=n.querySelector("#range_filter_info_");if(!(c instanceof HTMLDivElement&&l instanceof HTMLDivElement&&g instanceof HTMLDivElement))throw new Error("Cant find min, max value divs in html template");if(!(d instanceof HTMLSpanElement&&m instanceof HTMLSpanElement))throw new Error("Cant find current min, max in template");return d.dataset.value=e[0],m.dataset.value=e[1],c.innerText=a[0],l.innerText=a[1],c.setAttribute("id",`min_${o}`),l.setAttribute("id",`max_${o}`),g.setAttribute("id",`range_filter_info_${o}`),n};async function F(e,t){const n=await N("valueFilterTpl.html","value_filter"),r=n.querySelector("#filter_title"),{filter_title:i,filter_name:o,filter_settings:a,goods:s,filtredGoods:c}=t;p(r).innerText=i,p(r).setAttribute("id",Date.now().toString());const l=p(n.querySelector("#value_list"));if(n){const t=n.querySelector("#value_filter_tpl");if(!(t instanceof HTMLTemplateElement))return;const r=[];for(let n=0;n<e.length;n++){const i=t.content.cloneNode(!0);if(i instanceof DocumentFragment){const t=i.querySelector("#visible_value"),l=i.querySelector("#count_filter_goods"),m=i.querySelector("#total_count_filter_goods");if(!(t instanceof HTMLInputElement))return;if(t.checked=a.includes(e[n]),!t||!l||!m)throw new Error("cant find field in template");l.innerHTML=String(d(c,o,e[n])),m.innerHTML=String(d(s,o,e[n]));const g=p(i.querySelector("#filter_name"));t.setAttribute("id",`visible_value_${e[n]}`),t.setAttribute("value",e[n]),t.dataset.filterName=`_${o}`,g.innerText=e[n],g.setAttribute("id",`filter_name_${e[n]}`),r.push(i)}}l.append(...r)}return n.addEventListener("change",Y),n}const P=async e=>{const t=document.querySelector(`#range_filter_info_${e}`);if(!(t instanceof HTMLDivElement))throw new Error(`Cant find range filter div #range_filter_info_${e}`);const n=m(r.filteredGoodsItems,e);let i="Ничего не найдено...";parseInt(n[0])===parseInt(n[1])&&0!==parseInt(n[1])?i=`${n[0]}`:0!==parseInt(n[0])&&0!==parseInt(n[1])&&(i=`${n[0]} - ${n[1]}`),t.innerHTML="",t.append(i)},H=async()=>{g();const e=await F(r.filters_settings.all_brand,{filter_title:"Брэнды",filter_name:"brand",filter_settings:r.filters_settings._brand,goods:r.goodsItems,filtredGoods:r.filteredGoodsItems}),t=await F(r.filters_settings.all_category,{filter_title:"Категории",filter_name:"category",filter_settings:r.filters_settings._category,goods:r.goodsItems,filtredGoods:r.filteredGoodsItems}),n=[],i=document.querySelector("#shop_filters_value");e&&n.push(e),t&&n.push(t),i&&(i.innerHTML="",i.append(...n))},O=async()=>{const e=document.querySelector("#switcher_view");if(!e)throw new Error("Cant find switcher div in document");const t=await(async e=>{const t=await N("switchViewTpl.html","select-shop-view"),n=t.querySelector(`#radio-${e}`);return n instanceof HTMLInputElement&&(n.checked=!0),t.addEventListener("click",J),t})(r.view_settings.mode);e.innerHTML="",e.append(t)},D=e=>{const t=e.target;if(!(t instanceof HTMLButtonElement))return;t.innerText="Скопировано...";const n=location.href;navigator.clipboard.writeText(n),setTimeout((()=>{t.innerText="Копировать URL"}),2e3)},q=e=>{if(!(e.target instanceof HTMLButtonElement))return;let t=(e=>{const t=new URL(e);return l().forEach((e=>{t.searchParams.delete(e.name)})),decodeURIComponent(t.toString())})(location.href);t=(e=>{const t=new URL(e);return t.searchParams.delete("search"),t.toString()})(t),location.href=t},U=e=>{e.preventDefault();const t=e.target,n=new URL(location.href);t instanceof HTMLSelectElement&&(n.searchParams.set("sortBy",t.value),history.pushState(null,"",decodeURIComponent(n.toString())),a(),ie("#goods"))},B=e=>{e.preventDefault();const t=e.target;if(!(t instanceof HTMLInputElement))return;const n=new URL(location.href);n.searchParams.set("search",t.value),0===t.value.length&&n.searchParams.delete("search"),history.pushState(null,"",decodeURIComponent(n.toString())),ie("#goods"),H(),C()},$=async e=>{const t=f(e.target).closest("a");if(!t)return;let n="";if(p(t).dataset.anchor){const r=p(t).getAttribute("href");r&&(n=r),e.preventDefault(),await le(n),history.pushState(null,"",n)}},V=e=>{const t=f(e.target);let n=-1;var i;t.dataset.btnGoodsId&&(n=parseInt(t.dataset.btnGoodsId)),t&&t.classList.toggle("in-cart"),_(n)?(_(i=n)&&delete r.cart[i],t.dataset.btnTitle="Добавить в корзину"):(y(n),t.dataset.btnTitle="Удалить из корзины"),I(),w(),E.saveCartDataToLS(r.cart)},J=async t=>{t.preventDefault();const n=f(t.target).parentNode?.querySelector("input");if(n instanceof HTMLInputElement){if(r.view_settings.mode===n.value)return;n.value===e.tile&&ae(e.tile),n.value===e.simple&&ae(e.simple),O()}},Y=e=>{e.preventDefault();const t=e.target;if(!(t instanceof HTMLInputElement))return;const n=new URL(location.href),i=t.dataset.filterName,o=t.getAttribute("value");if(!i||!o)return;const a=n.searchParams.get(i);let s=[];null!==a&&(s=a.split(",")),t.checked?s.push(o):s=s.filter((e=>e!==o)),s.length>0?n.searchParams.set(i,s.join(",")):n.searchParams.delete(i),r.filters_settings[i]=s,history.pushState(null,"",decodeURIComponent(n.toString())),ie("#goods"),H(),C()},j=e=>{const t=e.target;if(!(t instanceof HTMLImageElement))return;const n=document.querySelector("#gc_image");if(!(n instanceof HTMLImageElement))throw new Error("Cant find target image tag");const r=t.dataset.pathToImg;r&&n.setAttribute("src",r)},z=async e=>{const t=e.target;if(!(t instanceof HTMLButtonElement))return;const n=parseInt(String(t.dataset.btnGoodsId));y(n),I(),w(),E.saveCartDataToLS(r.cart),await A(!0),history.pushState(null,"","/cart")},K=e=>{const t=e.target,n=t.dataset.goodsId,i=Number(t.dataset.maxCount),o=Number(r.cart[n]);"+"===t.dataset.typeButton?o<i&&(r.cart[n]=(Number(r.cart[n])+1).toString()):o>1?r.cart[n]=(Number(r.cart[n])-1).toString():1===o&&delete r.cart[n],I(),w(),E.saveCartDataToLS(r.cart),A()};function W(e){let t=JSON.parse(localStorage.getItem("PromoARR"));const n=e.target;if(!(n instanceof HTMLButtonElement))return;const r=n.dataset.promoCode;t=t.filter((e=>e.promoCode!==r)),localStorage.setItem("PromoARR",JSON.stringify(t)),A()}function Z(e){let t=JSON.parse(localStorage.getItem("PromoARR"));if(t||(t=[]),!(e.target instanceof HTMLButtonElement))return;const n=document.querySelector("#promo-text");if(!(n instanceof HTMLInputElement))return;const i=r.promoCodes.filter((e=>e.promoCode===n.value));t.push(i[0]),localStorage.setItem("PromoARR",JSON.stringify(t)),A()}function Q(e){const t=JSON.parse(localStorage.getItem("PromoARR")),n=e.target,i=r.promoCodes.filter((e=>e.promoCode===n.value)),o=document.getElementById("promo-button");if(null===t||0===t.length){if(!i.length)return void(o.style.display="none");o.style.display="block"}else{if(t.filter((e=>e.promoCode===n.value)).length)return;i.length&&(o.style.display="block")}}function ee(e){const t=e.target;"number"==typeof Number(t.value)&&Number(t.value)>0?localStorage.setItem("numOfElem",JSON.stringify(t.value)):localStorage.setItem("numOfElem",JSON.stringify(null)),localStorage.setItem("pageNumber",JSON.stringify(0)),setTimeout((()=>{A()}),1e3)}function te(){let e=JSON.parse(localStorage.getItem("pageNumber"));e||(e=0),e<JSON.parse(localStorage.getItem("maxNumberPage"))-1&&(e+=1,localStorage.setItem("pageNumber",JSON.stringify(e)),A())}function ne(){let e=JSON.parse(localStorage.getItem("pageNumber"));e||(e=0),e>0&&(e-=1,localStorage.setItem("pageNumber",JSON.stringify(e)),A())}async function re(t,n,{view:r}){const i=["gc_title","gc_description","gc_price","gc_rating","gc_stock","gc_brand","gc_category"];if(n){n.dataset.goodsId=String(t.id),r===e.tile&&n.classList.add("tile_card");const o=p(n).querySelector("#gc_image");o instanceof HTMLImageElement&&(o.setAttribute("src",t.images[0]),o.setAttribute("alt",t.title)),i.forEach((e=>{const r=p(n.querySelector(`#${e}`));switch(e){case"gc_price":r.innerText=u(parseInt(t[e.slice(3)].toString()),0);break;case"gc_title":const n=document.createElement("a");n.href=`/goods/${t.id}`,n.innerText=t[e.slice(3)].toString(),n.classList.add("card_link"),r.append(n);break;default:r.innerText=t[e.slice(3)].toString()}}))}const o=p(n.querySelector("#btn_add_to_cart")),a=n.querySelector("#btn_more_info");a instanceof HTMLAnchorElement&&(a.href=`/goods/${t.id}`);const s=_(t.id);return o.dataset.btnTitle=s?"Удалить из корзины":"Добавить в корзину",o.dataset.btnGoodsId=String(t.id),s&&o.classList.add("in-cart"),o.addEventListener("click",V),n}const ie=async e=>{const t=document.querySelector(e),n=r.view_settings.mode,i=[],o=await N("goodsCardTpl.html","goods_card");g();for(let e=0;e<r.filteredGoodsItems.length;e++){const t=o.cloneNode(!0);if(!(t instanceof HTMLElement))throw new Error("Cant clone node");i.push(await re(r.filteredGoodsItems[e],t,{view:n}))}t&&(t.innerHTML="",t.append(...i)),P("price"),P("stock")},oe="mode",ae=e=>{r.view_settings.mode=e;const t=new URL(location.href);t.searchParams.set(oe,e.toString()),history.pushState(null,"",decodeURIComponent(t.toString())),ie("#goods")};async function se(t){switch(r.view_settings.mode=(()=>{const t=new URL(location.href).searchParams.get(oe);return t&&t===e.tile?t:e.simple})(),t){case"store":await async function(){let e=await fetch("storePage.html").then((e=>e.text())).then((e=>(new DOMParser).parseFromString(e,"text/html").querySelector("#page")));e=p(e);const t=e.querySelector("#reset_filters"),n=e.querySelector("#copy_url");if(!(t instanceof HTMLButtonElement))throw new Error("Cant find resetFilters button");if(!(n instanceof HTMLButtonElement))throw new Error("Cant find copyUrlButton button");t.addEventListener("click",q),n.addEventListener("click",D);const i=p(document.querySelector("#app"));i.innerHTML="",i.append(p(e)),a(),await(async()=>{const e=new URL(location.href).searchParams.get("search"),t=document.querySelector("#search_field");if(!(t instanceof HTMLInputElement))throw new Error("Cant find search field div #search_field");e&&(t.value=e),t.addEventListener("keyup",B),r.filters_settings.minMaxPrice=m(r.goodsItems,"price"),r.filters_settings.minMaxStock=m(r.goodsItems,"stock"),await H(),await(async()=>{const e=await x(r.filters_settings.price,{filter_title:"Цена",filter_name:"price",filter_settings:r.filters_settings.minMaxPrice}),t=await x(r.filters_settings.stock,{filter_title:"Количество",filter_name:"stock",filter_settings:r.filters_settings.minMaxStock}),n=document.querySelector("#shop_filters_range"),i=[];e&&i.push(e),t&&i.push(t),n&&(n.innerHTML="",n.append(...i))})(),await P("price"),await P("stock");const n=document.getElementById("range_slider_price"),i=document.getElementById("range_slider_stock");if(!(n instanceof HTMLDivElement&&i instanceof HTMLDivElement))throw new Error("Out of div for range filter");new k(n,"min_price","max_price","price"),new k(i,"min_stock","max_stock","stock")})(),await(async()=>{const e=`${r.sort_settings.field_name},${r.sort_settings.direction}`,t=await(async e=>{const t=await N("sortSelectTpl.html","sort"),n=t.querySelector("#sort_select");if(!(n instanceof HTMLSelectElement))throw new Error("Cant find select element for sortSelect");return n.value=e,n.addEventListener("change",U),t})(e),n=document.querySelector("#sort_options");if(!(n instanceof HTMLDivElement))throw new Error("Cant find target div, for sortSelect render");n.innerHTML="",n.append(t)})(),await ie("#goods"),await C(),await O()}();break;case"cart":await A();break;case"goods":await async function(){const e=new URL(location.href),t=e.pathname.split("/")[2];var n;(Number.isNaN(Number(t))||(n=parseInt(t),void 0===r.goodsItems.find((e=>e.id===n))))&&(location.href=`${e.origin}/404`);const i=r.goodsItems.find((e=>e.id===parseInt(t)));if(void 0===i)throw location.href=`${e.origin}/404`,new Error("404");const o=await async function(e){const t=`${new URL(location.href).origin}/goodsPage.html`,n=["gc_title","gc_description","gc_price","gc_rating","gc_stock","gc_brand","gc_category"],r=await N(t,"page");if(r){r.dataset.goodsId=String(e.id);const t=p(r).querySelector("#gc_image");t instanceof HTMLImageElement&&(t.setAttribute("src",e.images[0]),t.setAttribute("alt",e.title));const i=[{title:"Store",link:"/"},{title:e.category,link:`/?_category=${e.category}`},{title:e.brand,link:`/?_brand=${e.brand}`},{title:e.title,link:null}].map((e=>{const t=document.createElement("li");if(null!==e.link){const n=document.createElement("a");n.href=e.link,n.innerText=e.title,n.classList.add("card_link"),t.append(n)}else t.append(e.title);return t.classList.add("crumb"),t})),o=r.querySelector("#breadcrumbs");if(!(o instanceof HTMLUListElement))throw new Error("Cant find UL for breadcrumbs");o.append(...i);const a=e.images.map((t=>{const n=document.createElement("img");return n.dataset.pathToImg=t,n.setAttribute("src",t),n.setAttribute("alt",e.title),n.classList.add("card_thumbs_img"),n.addEventListener("click",j),n})),s=r.querySelector("#thumbs_images");if(!(s instanceof HTMLDivElement))throw new Error("Cant find div for thumbs images");s.append(...a),n.forEach((t=>{p(r.querySelector(`#${t}`)).innerText="gc_price"!==t?e[t.slice(3)].toString():u(parseInt(e[t.slice(3)].toString()),0)}))}const i=p(r.querySelector("#btn_add_to_cart")),o=p(r.querySelector("#btn_add_to_cart_and_buy")),a=_(e.id);return i.dataset.btnTitle=a?"Удалить из корзины":"Добавить в корзину",i.dataset.btnGoodsId=String(e.id),o.dataset.btnGoodsId=String(e.id),a&&i.classList.add("in-cart"),i.addEventListener("click",V),o.addEventListener("click",z),r}(i),a=p(document.querySelector("#app"));a.innerHTML="",a.append(o)}();break;default:await async function(){const e=new URL(location.href),t=await N(e.origin+"/404Page.html","page"),n=p(document.querySelector("#app"));n.innerHTML="",n.append(t)}()}w()}const ce=["goods","cart",""],le=async e=>{if(null===e)return;const t=new URL(e),n=t.pathname.split("/");let r=n[1];!ce.includes(n[1])||n.length>3?r="404":"/"===t.pathname&&(r="store"),await se(r)};window.addEventListener("popstate",(()=>{le(location.href)})),window.addEventListener("load",(()=>{le(location.href)})),window.addEventListener("DOMContentLoaded",(()=>{(function(){r.settings.isLSAvailabel=E.isLSAvailabel(),r.promoCodes=[{promoCode:"RS",disc:10},{promoCode:"EPM",disc:5},{promoCode:"edolgov",disc:15},{promoCode:"dudarik",disc:15}],r.goodsItems=S();const e=E.loadCartDataFromLS()||{};r.cart=e,I(),g(),r.filters_settings.all_brand=(e=>Array.from(new Set(e.map((e=>String(e.brand))))))(r.goodsItems),r.filters_settings.all_category=(e=>Array.from(new Set(e.map((e=>String(e.category))))))(r.goodsItems),r.filters_settings.minMaxPrice=m(r.filteredGoodsItems,"price"),r.filters_settings.minMaxStock=m(r.filteredGoodsItems,"stock"),r.filters_settings.price=[...r.filters_settings.minMaxPrice],r.filters_settings.stock=[...r.filters_settings.minMaxStock]})(),document.addEventListener("click",$)}))})();